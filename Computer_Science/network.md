<h1>Network</h1>
<h2>NIC(network interface card)</h2>
<p>NIC는 16진수로 된 일련번호가 부여되어 있다. 이것을 mac address(물리주소)라고 한다. 이것은 전세계에서 유니크하게 각각 부여되어 있는 번호다.</p>
<p>mac address는 00-00-00-00-00-00 으로 되어있는데, 앞의 세 자리는 제조사 ID이고 뒤의 세 자리는 제조사가 NIC에 부여한 일련번호이다.</p>
<p>&nbsp;</p>
<h2>Ethernet Protocol</h2>
<p>라우터가 하나 있고, 라우터에 연결된 호스트들이 있다. 밖으로 나가는 네트워크는 끊겨있고 내부 네트워크는 열려있다면 유투브 접속은 안 되지만 같은 라우터에 접속되어 있는 호스트들끼리는 네트워킹이 가능하다. 이 범위를 LAN(Local area network)라고 한다. LAN에서 네트워킹을 할 때는 mac 주소만 가지고 있으면 된다.</p>
<p>즉, 같은 로컬 안에 있고 서로의 mac 주소를 알고 있으면 외부 네트워크가 끊겨 있어도 네트워킹이 가능하다. 이것을 Ethernet protocol 이라고 한다.</p>
<p>&nbsp;</p>
<h2>ARP</h2>
<ol>
<li>상대방의 mac 주소를 모를 때 Request packet(송신자의 IP와 mac주소 // 수신자의 IP와 0으로 적은 mac주소)을 꾸려 라우터(로컬 네트워크)로 보낸다.</li>
<li>라우터는 브로드캐스트로 해당 정보를 각 호스트에게 보낸다.</li>
<li>브로드캐스트한 라우터와 해당되지 않는 호스트는 요청을 무시하고, 해당 IP를 갖고 있는 호스트가 Response packet을 꾸려 mac 주소를 알고 있는 리퀘스트 호스트에 바로 통신한다.</li></ol>
<p>이러한 과정을 거쳐 IP 주소를 가지고 mac 주소를 알아내는 것을 ARP 라고 한다.</p>
<p>&nbsp;</p>
<h2>IP</h2>
<p>IP주소는 4byte로 구성되어 0~255까지의 숫자를 사용할 수 있다. 보통 마지막 숫자인 255는 브로드캐스트 주소로 예약되어 있다.</p>
<p>&nbsp;</p>
<h3>IP Class</h3>
<p>000.000.000.000 &lt;&lt;라고 구성되는 IP 주소의 맨 앞 자리가 무엇이냐에 따라 class가 A, B, C로 나뉜다.</p>
<p><img src='https://imgur.com/virQ1T7.jpg' alt='' referrerPolicy='no-referrer' /></p>
<p>Class A는 2<sup>8</sup>개의 Network ID와 2<sup>24</sup>개의 Host ID를 사용할 수 있다. 범위는 0~127이고 0으로 시작한다.</p>
<p>Class B는 2<sup>16</sup>개의 Network ID와 2<sup>16</sup>개의 Host ID를 사용할 수 있다. 범위는 128~191이고 10으로 시작한다.</p>
<p>Class C는 2<sup>24</sup>개의 Network ID와 2<sup>8</sup>개의 Host ID를 사용할 수 있다. 범위는 192~223이고 110으로 시작한다.</p>
<p>&nbsp;</p>
<h3>서브넷</h3>
<p>Host ID에 할당된 bit를 쪼개어 서브넷을 만들 수 있다.</p>
<p>Class C는 2<sup>8</sup>개의 Host ID를 사용할 수 있는데, 2개의 bit를 빌려 2<sup>2</sup>개를 subnet ID로 만들면 Host ID는 2<sup>6</sup>개가 된다. 따라서 접속할 수 있는 호스트의 수는 줄어들 게 되지만 그룹을 여러 개로 나누어 각자의 LAN으로 활용할 수 있다는 장점이 있다.</p>
<p>&nbsp;</p>
<h4>공인 IP와 사설 IP</h4>
<p>공인 IP는 전세계적으로 유니크하다. 전세계 어디에 있더라도 공인 IP주소만 알면 통신이 가능하다.</p>
<p>반면 사설 IP는 Private network 상에 존재하고 같은 주소로 다수의 Private network를 만들 수 있기 때문에 IP 주소를 안다고 해서 해당 컴퓨터와 통신할 수 없다. 또한 공인 IP를 사용하는 라우터는 DHCP(Dynamic Host Configuration Protocol)로 동작하기 때문에 동적으로 IP를 할당한다. 항상 같은 IP를 할당받을 수 없다.</p>
<p>&nbsp;</p>
<h4>LAT</h4>
<p>사설망을 쓰는 호스트가 데이터를 요청했을 때 라우터가 갖고 있는 랜카드(공인 IP)를, 요청한 사설망 호스트에게 임의로 대여한다. 사설망 호스트는 임의로 대여받은 공인 IP를 이용해 요청한 데이터를 받는다. 이것을 변환테이블이라고 한다.</p>
<p>이 방법은 요청하는 호스트의 갯수만큼 라우터가 랜카드를 가지고 있어야 한다는 문제가 있다.</p>
<p>&nbsp;</p>
<h4>LAPT</h4>
<p>모든 호스트가 같은 라우터를 대여하되 포트 번호를 바꿔서 구분하는 것이다.</p>
<p>이 경우엔 라우터가 랜카드를 많이 가지고 있을 필요가 없다. 몇 개의 라우터로도 포트 번호를 구분하면 2<sup>16</sup>개의 LAPT를 사용할 수 있다.</p>
<p>&nbsp;</p>
<h2>TCP/UDP</h2>
<p>IP를 알고 있으면 호스트는 특정할 수 있지만 호스트가 요청한 작업의 프로세스에 정확하게 응답하기 어렵다. 호스트가 요청한 프로세스에 정확하게 응답하기 위해서는 전송계층의 Port가 필요하다. Port는 소켓에 할당한 주소를 뜻하고 특정 라우터의 특정 호스트가 요청한 특정 프로세스로 데이터를 전달할 수 있다.</p>
<p>Port는 2byte로 되어있어 0부터 2<sup>16</sup>-1개를 사용할 수 있고, 그 중에서도 서버가 가진 예약된 Port 번호는 0부터 1023까지, 클라이언트가 가진 dynamic port 갯수는 49152개부터 65535까지 사용할 수 있다.</p>
<p>&nbsp;</p>
<h3>TCP</h3>
<p>연결지향형 프로토콜로 신뢰도가 높다. 패킷이 유실되면 재전송해준다. 신뢰도가 높은 대신에 네트워크에 부담을 준다. 왜냐하면 계속 패킷이 유실됐는지 여부를 확인하기 때문이다. 파일이나 메일을 전송하는 것은 TCP를 사용한다.</p>
<p>&nbsp;</p>
<h3>UDP</h3>
<p>비연결 지향형 프로토콜로 신뢰도가 낮다. 접속없이 데이터만 보내기 때문에 전송된 데이터의 일부가 손실될 수도 있고, 손실된다 하더라도 재전송하지 않는다. 대신 빠르고 가볍다. 스트리밍 서비스 등 빠른 서비스는 UDP를 사용한다.</p>
<p>&nbsp;</p>
<h2>HTTP</h2>
<p>HTTP는 최상단의 Application 영역에 존재한다. 보안상 이슈로 인해 암호화를 하지 않는 http는 계속 줄어들고 있고, 그 자리를 https가 대체하고 있다. https는 기존 네트워크 계층에서 SSL(secure socket layer)/TLS 영역이 추가된다. 데이터를 암호화/복호화하는 영역이다. https를 사용하면 해킹을 당하더라도 데이터가 암호화되기 때문에 해커가 데이터를 확인할 수 없다.</p>
<p>&nbsp;</p>
<p>HTTP는 문자열 기반의 프로토콜이나 현재에는 이미지, 동영상 등 다양한 미디어 파일을 전송하는 데 사용된다.</p>
<p>HTTP에도 버전이 있다.</p>
<p>HTTP 1.0까지의 버전에서는 TCP 연결 후 하나의 요청과 응답 후 연결을 끊는다.</p>
<p>HTTP 1.1부터는 요청과 응답이 끝나더라도 연결을 끊지 않는다. 이것을 1.0 버전으로 쓰고 싶으면 header에 connection: close를 추가하면 1.0처럼 일시적으로 연결 후 연결을 끊는다.</p>
<p>&nbsp;</p>
<h3>HTTP 메서드</h3>
<p>주로 GET과 POST를 사용한다.</p>
<p>GET은 URL이 지정하는 자원을 찾아 클라이언트에게 전송해주는 것이고, POST는 클라이언트가 임의의 데이터를 서버로 보내는 것이다. 주로 form을 사용하며 서버의 프로그램에 전달한다.</p>
<p>&nbsp;</p>
<h3>상태코드</h3>
<ol>
<li>1XX : 정보 제공 메시지 - 일반적인 정보 제공</li>
<li>2XX : 성공 - 서버가 메서드를 받아 수행</li>
<li>3XX : 리다이렉션 - 자원이 여러 종류가 있거나 새로운 URL로 이동할 때</li>
<li>4XX : 클라이언트 에러 - 요청이 잘못되었거나 자원을 찾을 수 없을 때</li>
<li>5XX : 서버 에러 - 요청은 유효하지만 수행 방법을 모르거나 서버 문제로 처리가 안 될 때</li></ol>
<p>&nbsp;</p>
<h3>컨텐트 협상</h3>
<ol>
<li>서버 주도(server-driven) 협상: 요청한 자원이 없을 때 비슷한 것을 추측해서 서버가 보내는 방식. 클라이언트가 원하는 데이터를 받지 못할 수도 있다.</li>
<li>에이전트 주도(Agent-driven) 협상: 클라이언트가 자원을 고를 수 있다. 대신 자료에 접근하는데 두 번의 요청과 응답이 필요하다. 따라서 효율성은 떨어지게 된다.</li></ol>
<p>&nbsp;</p>
<h3>DNS(Domain name system)</h3>
<p>IP주소를 매번 외워서 사용할 수 없기 때문에 도메인을 만들었다. 도메인 네임은 사람이 읽기 쉽고 알아보기 쉽도록 해당 웹의 정보를 사람이 직접 쓰는 언어로 만들어져 있다. 그러나 도메인 네임은 웹 이용의 용이성을 위해 IP주소를 바꿔준 것이다. 이것을 다시 IP주소로 바꾸기 위해 DNS가 필요하다.</p>
<p>&nbsp;</p>

