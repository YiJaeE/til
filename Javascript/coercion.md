# 타입 변환

값의 타입은 개발자의 의도에 의해 다른 타입으로 변환할 수 있다.

개발자가 의도적으로 값의 타입을 변환하는 것을 `명시적 타입 변환(Explicit coercion)` 또는 `타입 캐스팅(Type casting)`이라고 한다.

```javascript
var x = 10;

var str = x.toString();
console.log(typeof str, str);
// string 10

console.log(typeof x, x);
// number 10
```

그러나 자바스크립트는 동적 타입 언어이기 때문에 개발자의 의도와는 관계없이 자바스크립트 엔진이 암묵적으로 타입을 변환하기도 한다. 이것을 `암묵적 타입 변환(Implicit coercion)`  또는 `타입 강제 변환(Type coercion)` 이라고 한다.

```javascript
var x = 10;

var str = x + '';
console.log(typeof str, str);
// string 10

console.log(typeof x, x);
// number 10
```

위의 두 경우에 x의 값 자체가 변경된 것은 아니다. x의 값을 참조해 타입을 변경한 str에 타입 변환한 새로운 값이 할당된 것이다.



명시적 타입 변환은 타입을 변경하겠다는 개발자의 의지가 코드에 드러난다. 그러나 코드의 간결성과 효율성을 생각했을 때 명시적 타입 변환만을 사용할 수는 없다.

암묵적 타입 변환은 명시적 타입 변환과 다르게 타입을 변경하겠다는 개발자의 의지가 코드에 드러나지 않는다. 암묵적 타입 변환은 자바스크립트 엔진에 의해 자동 변환되기 때문이다.

따라서 개발자는 작성한 코드를 예측할 수 있어야 한다.



## 암묵적 타입 변환

암묵적 타입 변환이 발생하면 자바스크립트 엔진은 문자열, 숫자, 불리언과 같은 원시 타입 중 하나로 타입을 변환한다.



### 문자열 타입으로 변환

+연산자는 피연산자 중 하나 이상이 문자열일 때 문자열 연결 연산자로 동작한다. 문자열 연결 연산자는 문자열과 문자열을 연결해 문자열 값을 만드는 것이기 때문에 문맥상 모두 문자열 타입이어야 한다.

그러나 반드시 연산식의 피연산자만이 대상인 것은 아니다. 자바스크립트 엔진은 표현식을 평가할 때도 암묵적 타입 변환을 실행한다. ES6에서 도입된 템플릿 리터럴의 문자열 인터폴레이션은 표현식의 평가 결과를 문자열 타입으로 암묵적 타입 변환한다.



문자열 타입이 아닌 값을 문자열 타입으로 암묵적 타입 변환을 수행할 때는

`''` 를 +연산자 뒤에 붙여준다.

심볼 타입을 제외한 모든 타입은 문자열 타입으로 변환된다.



### 숫자 타입으로 변환

산술 연산자는 숫자 값을 만드는 것이다. 따라서 산술 연산자의 모든 피연산자는 코드 문맥상 모두 숫자 타입이어야 한다.

산술 연산자에서도 살펴보았듯이 산술 연산자 표현식을 평가하려면 피연산자의 타입은 모두 숫자 타입이어야 한다. 따라서 자바스크립트 엔진은 하나 이상의 피연산자가 숫자 타입일 때 숫자 타입이 아닌 피연산자를 숫자 타입으로 암묵적 타입 변환한다. 만약 숫자 타입으로 변환할 수 없다면 평가 결과는 NaN이 된다.



비교 연산자는 크기를 비교하는 연산자이다. 크기를 비교하려면 피연산자가 숫자 타입이어야 하므로 비교 연산자 표현식을 평가하려면 피연산자의 타입은 모두 숫자 타입이어야 한다.



숫자 타입이 아닌 값을 숫자 타입으로 암묵적 타입 변환을 수행할 때는

변환하고자 하는 숫자 타입이 아닌 값 앞에 `+` 를 붙인다.

빈 문자열, 빈 배열, null, false는 0으로 true는 1로 변환된다. 객체와 빈 배열이 아닌 배열, undefined는 변환되지 않고 NaN을 반환한다.



### 불리언 타입으로 변환

제어문과 삼항 조건 연산자의 조건식은 불리언 값을 반환해야 하는 표현식이다. 이때 자바스크립트 엔진은 불리언 타입이 아닌 값을 Truthy 값과 Falsy 값으로 구분해 Truthy 값은 true로, Falsy 값은 false로 변환된다.



false로 평가되는 Falsy 값

- false
- undefined
- null
- 0, -0
- NaN
- ' '

Falsy 값 이외의 값은 제어문의 조건식과 같이 불리언 값으로 평가되어야 할 문맥에서 모두 true로 평가되는 Truthy 값이다.

Truthy 값과 Falsy 값을 판별하는 함수는 다음과 같다.

```javascript
function isFalsy(a) {
	return !a;
}

function isTruthy(a) {
  return !!a;
}
```



## 명시적 타입 변환

개발자의 의도에 의해 명시적으로 타입을 변경하는 방법은

1. 래퍼 객체 생성자 함수(String, Number, Boolean)를 new 연산자 없이 호출
2. 자바스크립트에서 제공하는 빌트인 메서드를 사용
3. 암묵적 타입 변환을 이용

등이 있다.



### 문자열 타입으로 변환

1. String 생성자 함수를 new 연산자 없이 호출하는 방법
2. Object.prototype.toString 메서드를 사용하는 방법
3. 문자열 연결 연산자를 이용하는 방

```javascript
console.log(String(1));
console.log(String(true));

console.log((1).toString());
console.log((true).toString()):

console.log(1 + '');
console.log(true + '');
```



### 숫자 타입을 변환

1. Number 생성자 함수를 new 연산자 없이 호출하는 방법
2. parseInt, parseFloat 함수를 사용하는 방법(문자열만 가능)
3. +단항 연결 연산자를 이용하는 방법
4. *산술 연산자를 이용하는 방



### 불리언 타입으로 변환

1. Boolean 생성자 함수를 new 연산자 없이 호출하는 방법
2. ! 부정 논리 연산자를 두 번 사용하는 방법
